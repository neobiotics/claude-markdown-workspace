# Claude Code + NoteDiscovery Setup
# Notes stored in ./notes - both containers have access
services:
  # Web UI for notes
  notediscovery:
    image: ghcr.io/gamosoft/notediscovery:latest
    container_name: notediscovery
    ports:
      - 8800:8000
    volumes:
      - ./notes:/app/data
    # Optional: Enable authentication
    # environment:
    #   - AUTHENTICATION_ENABLED=true
    #   - AUTHENTICATION_PASSWORD=your-password
    restart: unless-stopped

  # Claude Code with SSH access
  claude-code:
    build: ./claude-ssh
    container_name: claude-code
    ports:
      - 2222:22
    volumes:
      # Notes directory (same as NoteDiscovery)
      - ./notes:/workspace/notes
      # Keep Claude config persistent
      - ./claude-data:/root/.claude
    environment:
      # GitHub users for SSH key import (comma-separated)
      - GITHUB_USERS=${GITHUB_USERS}
      # Anthropic API Key
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    restart: unless-stopped
